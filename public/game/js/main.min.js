for(var game=1,trackHolder=$(".track-list"),trackList=trackHolder.find("li").detach(),usedTrackList=[],newTrackList=[];;){var liTrack=trackList[Math.floor(Math.random()*trackList.length)];if(-1===usedTrackList.indexOf(liTrack)&&-1===newTrackList.indexOf(liTrack)&&newTrackList.push(liTrack),6<=newTrackList.length)break}function handleTrackDrop(e,a){1===a.draggable.data("track")?($(".track-box").draggable("disable"),a.draggable.position({of:$(this),my:"center center",at:"center center"}),a.draggable.addClass("correct"),a.draggable.draggable("option","revert",!1),nextGame()):(wrongPlay(),a.draggable.addClass("wrong"))}usedTrackList=newTrackList,trackHolder.html(newTrackList),$(".track-box").draggable({containment:"#game-1",stack:".track-box",cursor:"move",revert:!0}),$(".track-slot").droppable({accept:".track-box",hoverClass:"hovered",drop:handleTrackDrop});for(var partHolder=$(".part-list"),partList=partHolder.find("li").detach(),usedPartList=[],newPartList=[];;){var liPart=partList[Math.floor(Math.random()*partList.length)];if(-1===usedPartList.indexOf(liPart)&&-1===newPartList.indexOf(liPart)&&newPartList.push(liPart),3<=newPartList.length)break}usedPartList=newPartList,partHolder.html(newPartList),$(".part-box").draggable({containment:"#game-2",stack:".part-box",cursor:"move",revert:!0}),$(".part-slot").droppable({accept:".part-box",hoverClass:"hovered",drop:handlePartDrop});var correctPart=0;function handlePartDrop(e,a){$(this).data("part")===a.draggable.data("part")?(a.draggable.draggable("disable"),a.draggable.position({of:$(this),my:"center center",at:"center center"}),a.draggable.addClass("correct-part"),a.draggable.draggable("option","revert",!1),correctPlay(),3===++correctPart&&nextGame()):wrongPlay()}for(var flagHolder=$(".flag-list"),flagList=flagHolder.find("li").detach(),usedFlagList=[],newFlagList=[];;){var liFlag=flagList[Math.floor(Math.random()*flagList.length)];if(-1===usedFlagList.indexOf(liFlag)&&-1===newFlagList.indexOf(liFlag)&&newFlagList.push(liFlag),6<=newFlagList.length)break}function handleFlagDrop(e,a){122===a.draggable.data("box")?(a.draggable.draggable("disable"),$(".flag-box").draggable("disable"),a.draggable.position({of:$(this),my:"top left",at:"top left"}),a.draggable.addClass("correct"),a.draggable.draggable("option","revert",!1),nextGame()):(wrongPlay(),a.draggable.addClass("wrong"))}usedFlagList=newFlagList,flagHolder.html(newFlagList),$(".flag-box").draggable({containment:"#game-3",stack:".flag-box",cursor:"move",revert:!0}),$(".flag-slot").droppable({accept:".flag-box",hoverClass:"hovered",drop:handleFlagDrop});for(var winnerHolder=$(".winner-list"),winnerList=winnerHolder.find("li").detach(),usedWinnerList=[],newWinnerList=[];;){var liWinner=winnerList[Math.floor(Math.random()*winnerList.length)];if(-1===usedWinnerList.indexOf(liWinner)&&-1===newWinnerList.indexOf(liWinner)&&newWinnerList.push(liWinner),2<=newWinnerList.length)break}usedWinnerList=newWinnerList,winnerHolder.html(newWinnerList),$(".winner-box").draggable({containment:"#game-5",stack:".winner-box",cursor:"move",revert:!0}),$(".winner-slot").droppable({accept:".winner-box",hoverClass:"hovered",drop:handleWinnerDrop});var correctWinner=0;function handleWinnerDrop(e,a){$(this).data("winner")===a.draggable.data("winner")?(a.draggable.draggable("disable"),a.draggable.position({of:$(this),my:"top left",at:"top left"}),a.draggable.addClass("correct-winner"),a.draggable.draggable("option","revert",!1),correctPlay(),2===++correctWinner&&nextGame()):wrongPlay()}$(".suit-box").draggable({containment:"#game-4",stack:".suit-box",cursor:"move",revert:!0}),$(".suit-slot").droppable({accept:".suit-box",hoverClass:"hovered",drop:handleSuitDrop});var correctSuit=0;function handleSuitDrop(e,a){$(this).data("suit")===a.draggable.data("suit")&&(a.draggable.draggable("disable"),a.draggable.position({of:$(this),my:"center center",at:"center center"}),a.draggable.addClass("correct-suit"),a.draggable.draggable("option","revert",!1),4===++correctSuit&&nextGame())}for(var answerHolder=$(".answer-list"),answerList=answerHolder.find("li").detach(),usedAnswerList=[],newAnswerList=[];;){var liAnswer=answerList[Math.floor(Math.random()*answerList.length)];if(-1===usedAnswerList.indexOf(liAnswer)&&-1===newAnswerList.indexOf(liAnswer)&&newAnswerList.push(liAnswer),3<=newAnswerList.length)break}function wrongPlay(){$("#wrong-audio").get(0).muted=!1,$("#wrong-audio").get(0).play()}function correctPlay(){$("#correct-audio").get(0).muted=!1,$("#correct-audio").get(0).play()}function nextGame(){game<5?(correctPlay(),$("#game-"+game).fadeOut(),game++,$(".correct-pop").fadeIn(function(){}).delay(300).fadeOut(function(){$("#game-"+game).slideDown(),$(".game-status span").text(game)})):$(".loader").fadeIn(function(){$(".game-time span").stopwatch().stopwatch("stop"),$(".result").val($(".game-time span").text()),$("#formEnd").submit()})}usedAnswerList=newAnswerList,answerHolder.html(newAnswerList),$(".answer-list li").click(function(){2==$(this).data("answer")?($(this).addClass("correct"),nextGame()):($(this).addClass("wrong"),wrongPlay())}),$("#soundFix").click(function(){$("#correct-audio").get(0).play(),$("#wrong-audio").get(0).play()}),$(document).ready(function(){$(".loader").delay(1e3).fadeOut(function(){function e(){0===a?($(".loader-start").fadeOut(),clearInterval(r),$(".game-time span").stopwatch().stopwatch("start")):($(".loader-start-num").html(a),a--)}var a=2,r=setInterval(function(){e()},1e3)});var e=0;document.body.addEventListener("mousemove",function(){0==e&&($("#correct-audio").get(0).muted=!0,$("#correct-audio").get(0).play(),$("#wrong-audio").get(0).muted=!0,$("#wrong-audio").get(0).play(),e=1)}),window.matchMedia("(orientation: landscape)").matches});
