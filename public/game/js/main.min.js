var game=1;function handleTrackDrop(a,e){1===e.draggable.data("track")&&($(".track-box").draggable("disable"),e.draggable.position({of:$(this),my:"center center",at:"center center"}),e.draggable.addClass("correct"),e.draggable.draggable("option","revert",!1),nextGame())}$(".track-box").draggable({containment:"#game-1",stack:".track-box",cursor:"move",revert:!0}),$(".track-slot").droppable({accept:".track-box",hoverClass:"hovered",drop:handleTrackDrop}),$(".part-box").draggable({containment:"#game-2",stack:".part-box",cursor:"move",revert:!0}),$(".part-slot").droppable({accept:".part-box",hoverClass:"hovered",drop:handlePartDrop});var correctPart=0;function handlePartDrop(a,e){$(this).data("part")===e.draggable.data("part")&&(e.draggable.draggable("disable"),e.draggable.position({of:$(this),my:"center center",at:"center center"}),e.draggable.addClass("correct-part"),e.draggable.draggable("option","revert",!1),3===++correctPart&&nextGame())}function handleFlagDrop(a,e){122===e.draggable.data("box")&&(e.draggable.draggable("disable"),$(".flag-box").draggable("disable"),e.draggable.position({of:$(this),my:"top left",at:"top left"}),e.draggable.addClass("correct"),e.draggable.draggable("option","revert",!1),nextGame())}$(".flag-box").draggable({containment:"#game-3",stack:".flag-box",cursor:"move",revert:!0}),$(".flag-slot").droppable({accept:".flag-box",hoverClass:"hovered",drop:handleFlagDrop}),$(".suit-box").draggable({containment:"#game-4",stack:".suit-box",cursor:"move",revert:!0}),$(".suit-slot").droppable({accept:".suit-box",hoverClass:"hovered",drop:handleSuitDrop});var correctSuit=0;function handleSuitDrop(a,e){$(this).data("suit")===e.draggable.data("suit")&&(e.draggable.draggable("disable"),e.draggable.position({of:$(this),my:"center center",at:"center center"}),e.draggable.addClass("correct-suit"),e.draggable.draggable("option","revert",!1),4===++correctSuit&&nextGame())}function nextGame(){game<4?($("#game-"+game).slideUp(),game++,$("#game-"+game).fadeIn(),$(".game-status span").text(game)):$(".loader").slideDown(function(){$(".game-time span").stopwatch().stopwatch("stop"),$(".result").val($(".game-time span").text()),$("#formEnd").submit()})}$(".text-anime").click(function(){nextGame()}),$(document).ready(function(){$(".loader").delay(1e3).slideUp(function(){$(".game-time span").stopwatch().stopwatch("start")})});
